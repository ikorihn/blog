{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/2021/10/build-typescript-on-netlify/",
    "result": {"data":{"site":{"siteMetadata":{"title":"ikorihn Blog"}},"markdownRemark":{"id":"257f86e4-c102-5bd2-b09a-a5b7f0c5aecf","excerpt":"事象 TypeScript化したGatsbyをNetlifyでビルドした際に以下のエラーが発生しました。 対応 Netlifyのビルドログに  とあるようにデフォルトではv12.18.0が使われるようです。\nOptional ChainingはNode.js v14から使用できる機能のため、v1…","html":"<h2 id=\"事象\">事象</h2>\n<p>TypeScript化したGatsbyをNetlifyでビルドした際に以下のエラーが発生しました。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ gatsby build\nerror Error <span class=\"token keyword\">in</span> <span class=\"token string\">\"/opt/build/repo/gatsby-node.js\"</span><span class=\"token builtin class-name\">:</span> Unexpected token <span class=\"token string\">'.'</span>\n\n\n  Error: /opt/build/repo/src/gatsby-node/index.ts:28\n      const posts <span class=\"token operator\">=</span> result.data?.allMarkdownRemark.nodes<span class=\"token punctuation\">;</span>\n                                ^\n  SyntaxError: Unexpected token <span class=\"token string\">'.'</span></code></pre></div>\n<h2 id=\"対応\">対応</h2>\n<p>Netlifyのビルドログに <code class=\"language-text\">Now using node v12.18.0 (npm v6.14.4)</code> とあるようにデフォルトではv12.18.0が使われるようです。\nOptional ChainingはNode.js v14から使用できる機能のため、v14以上が使用されるように設定します。</p>\n<p><a href=\"https://docs.netlify.com/configure-builds/manage-dependencies/\">Manage build dependencies | Netlify Docs</a></p>\n<p>環境変数 <code class=\"language-text\">NODE_VERSION</code> で指定できるため以下のように設定しました。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 526px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08489cbc1fdd0029dd45fd6cb32df7e6/2d7ab/2021-10-31-17-31-50.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.78481012658227%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVQ4y51T227bMAz1///YXjo0BXJfhzWJY1t3+S7bss8gOjGyokW3ETggRRJHJEVF39cbrHZ7BP3teYVUKXgAbhzRTQHTgtk3fQjnPZphQPTjdMLr+UI4vp1wzjIwbcCMgbAWmdZIpaKLhM2RSEm+TGmyKSYVbNMQaSSLAqosCcHm1t4ILfgNgZzbnOKZNnOOmS8NxCE3b1q0gRB/KdMNeNCPMk4T/DgiOl9ibPYHHF9/Yns4Yr3b4+18Id/T8ws2uwOGYZiJpulT3CUqqwpMCHAhkTKOlDHoMDvOkWSMzuM4ft3BjTgKyY8IzqC999RGkL7v4boOrXOknXOz7Ry6roP340JKFQqlIJUmKG0gpEKcpFSx1JrOAYwLSKWWHC4lIZAvhE3bwuYFglbGIC+KD4d+l34YYIsCoZD3LdMMc5uDZQzWWCRJCs54iH5K2DYtrtfklvcwv9vzR1XnIOsSsiqh6gqiKpHlFiy3SHOLxBqIsiDfSQnwsoBpG8i6oljduaU6atnUNbIip8SgA0lsNCXHRuGk5OL7JfgcMxqxVjgridK1fxL2XYdrnIAxTi2H9n0/4F9lWZuqqvGy3mK93eNp9UJ2UVZfLvL7hV4We/B++VZ3BF94zf/Bb+GRhvReSLadAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2021 10 31 17 31 50\"\n        title=\"2021 10 31 17 31 50\"\n        src=\"/static/08489cbc1fdd0029dd45fd6cb32df7e6/2d7ab/2021-10-31-17-31-50.png\"\n        srcset=\"/static/08489cbc1fdd0029dd45fd6cb32df7e6/c26ae/2021-10-31-17-31-50.png 158w,\n/static/08489cbc1fdd0029dd45fd6cb32df7e6/6bdcf/2021-10-31-17-31-50.png 315w,\n/static/08489cbc1fdd0029dd45fd6cb32df7e6/2d7ab/2021-10-31-17-31-50.png 526w\"\n        sizes=\"(max-width: 526px) 100vw, 526px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>これでビルドが通るようになりました。</p>","tableOfContents":"<ul>\n<li><a href=\"#%E4%BA%8B%E8%B1%A1\">事象</a></li>\n<li><a href=\"#%E5%AF%BE%E5%BF%9C\">対応</a></li>\n</ul>","frontmatter":{"title":"TypeScriptのGatsbyをNetlifyでビルドしたときのエラーに対応した","date":"October 31, 2021","description":"TypeScript化したGatsbyをNetlifyでビルドしたときに発生したエラーへの対応について"}},"previous":{"fields":{"slug":"/2021/10/start-blog-with-gatsby/"},"frontmatter":{"title":"Gatsbyでブログを作ったので、構築ログを残す"}},"next":{"fields":{"slug":"/2021/12/look-back-2021/"},"frontmatter":{"title":"2021年振り返り"}}},"pageContext":{"id":"257f86e4-c102-5bd2-b09a-a5b7f0c5aecf","previousPostId":"c4f64ed1-bd6a-51af-b1e3-d6850a78caa1","nextPostId":"60f9cc98-8e6c-5356-ad1b-69b416a566eb"}},
    "staticQueryHashes": ["1857159792","984448874"]}